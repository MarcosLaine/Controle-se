import{j as e}from"./chart-vendor-Bh8T1N6h.js";import{r as n}from"./react-vendor-Ds2lu_e3.js";import{u as v,b as m,z as r,B as w}from"./index-D8iPbbyk.js";import{f as I}from"./formatters-Dsd9xoBe.js";import{M as E}from"./Modal-sr4I0w_v.js";import{P as S,T as k}from"./trash-2-FLo-CoGg.js";import{P as A}from"./pen-square-CW-Z5GoV.js";function B(){const{user:o}=v(),[x,j]=n.useState([]),[f,p]=n.useState(!0),[g,u]=n.useState(!1),[l,h]=n.useState(null),[s,i]=n.useState({nome:"",tipo:"Corrente",saldoInicial:""});n.useEffect(()=>{c()},[o]);const c=async()=>{if(o){p(!0);try{const a=await m.get(`/accounts?userId=${o.id}`);a.success&&j(a.data||[])}catch{r.error("Erro ao carregar contas")}finally{p(!1)}}},N=async a=>{if(a.preventDefault(),!s.nome.trim()){r.error("Nome da conta é obrigatório");return}try{const t={nome:s.nome,tipo:s.tipo,saldoInicial:parseFloat(s.saldoInicial)||0,userId:o.id};l?(await m.put(`/accounts/${l.idConta}`,t)).success&&(r.success("Conta atualizada!"),c(),d()):(await m.post("/accounts",t)).success&&(r.success("Conta criada!"),c(),d())}catch(t){r.error(t.message||"Erro ao salvar conta")}},b=a=>{var t;h(a),i({nome:a.nome,tipo:a.tipo,saldoInicial:((t=a.saldoAtual)==null?void 0:t.toString())||""}),u(!0)},y=async a=>{if(confirm("Tem certeza que deseja excluir esta conta?"))try{(await m.delete(`/accounts/${a}?userId=${o.id}`)).success&&(r.success("Conta excluída!"),c())}catch(t){r.error(t.message||"Erro ao excluir conta")}},d=()=>{u(!1),h(null),i({nome:"",tipo:"Corrente",saldoInicial:""})};return f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-600 border-t-transparent"})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Contas"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gerencie suas contas bancárias"})]}),e.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[e.jsx(S,{className:"w-4 h-4"}),"Nova Conta"]})]}),x.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(w,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Nenhuma conta cadastrada"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(a=>e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a.nome}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:a.tipo}),e.jsx("p",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:I(a.saldoAtual||0)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>b(a),className:"btn-secondary flex-1",children:[e.jsx(A,{className:"w-4 h-4"}),"Editar"]}),e.jsxs("button",{onClick:()=>y(a.idConta),className:"btn-danger flex-1",children:[e.jsx(k,{className:"w-4 h-4"}),"Excluir"]})]})]},a.idConta))}),e.jsx(E,{isOpen:g,onClose:d,title:l?"Editar Conta":"Nova Conta",children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome da Conta"}),e.jsx("input",{type:"text",value:s.nome,onChange:a=>i({...s,nome:a.target.value}),className:"input",placeholder:"Ex: Itaú, Caixa, Binance, Avenue...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Tipo"}),e.jsxs("select",{value:s.tipo,onChange:a=>i({...s,tipo:a.target.value}),className:"input",children:[e.jsx("option",{value:"Corrente",children:"Corrente"}),e.jsx("option",{value:"Poupança",children:"Poupança"}),e.jsx("option",{value:"Investimento",children:"Investimento"}),e.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"Cartão de Crédito",children:"Cartão de Crédito"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Saldo Inicial"}),e.jsx("input",{type:"number",step:"0.01",value:s.saldoInicial,onChange:a=>i({...s,saldoInicial:a.target.value}),className:"input",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:d,className:"btn-secondary",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary",children:l?"Atualizar":"Criar"})]})]})})]})}export{B as default};
