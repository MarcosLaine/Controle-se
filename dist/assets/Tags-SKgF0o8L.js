import{j as e}from"./chart-vendor-Bh8T1N6h.js";import{r as t}from"./react-vendor-Ds2lu_e3.js";import{u as T,b as m,z as c,T as p}from"./index-Bxg-l_Jj.js";import{M as w}from"./Modal-CbvRRIwR.js";import{P as C,T as E}from"./trash-2-CF_gXZbT.js";import{P as k}from"./pen-square-avoyjI0f.js";function $(){const{user:l}=T(),[x,f]=t.useState([]),[j,g]=t.useState(!0),[N,u]=t.useState(!1),[n,h]=t.useState(null),[a,o]=t.useState({nome:"",cor:"#3498db"});t.useEffect(()=>{l&&i()},[l]);const i=async()=>{g(!0);try{const s=await m.get(`/tags?userId=${l.id}`);s.success&&f(s.data||[])}catch{c.error("Erro ao carregar tags")}finally{g(!1)}},y=async s=>{s.preventDefault();try{const r={nome:a.nome,cor:a.cor,userId:l.id};n?(await m.put(`/tags/${n.idTag}`,{...r,id:n.idTag})).success&&(c.success("Tag atualizada!"),i(),d()):(await m.post("/tags",r)).success&&(c.success("Tag criada!"),i(),d())}catch(r){c.error(r.message||"Erro ao salvar tag")}},b=async s=>{if(confirm("Tem certeza que deseja excluir esta tag?"))try{(await m.delete(`/tags/${s}`)).success&&(c.success("Tag excluída!"),i())}catch{c.error("Erro ao excluir tag")}},d=()=>{u(!1),h(null),o({nome:"",cor:"#3498db"})};return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-600 border-t-transparent"})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Tags"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Organize suas transações com tags"})]}),e.jsxs("button",{onClick:()=>u(!0),className:"btn-primary",children:[e.jsx(C,{className:"w-4 h-4"}),"Nova Tag"]})]}),x.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(p,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Nenhuma tag criada"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(s=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("span",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:s.cor},children:[e.jsx(p,{className:"w-4 h-4 inline mr-2"}),s.nome]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{h(s),o({nome:s.nome,cor:s.cor}),u(!0)},className:"btn-secondary flex-1",children:[e.jsx(k,{className:"w-4 h-4"}),"Editar"]}),e.jsxs("button",{onClick:()=>b(s.idTag),className:"btn-danger flex-1",children:[e.jsx(E,{className:"w-4 h-4"}),"Excluir"]})]})]},s.idTag))}),e.jsx(w,{isOpen:N,onClose:d,title:n?"Editar Tag":"Nova Tag",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nome da Tag"}),e.jsx("input",{type:"text",value:a.nome,onChange:s=>o({...a,nome:s.target.value}),className:"input",placeholder:"Ex: Urgente, Pessoal...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Cor"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"color",value:a.cor,onChange:s=>o({...a,cor:s.target.value}),className:"w-20 h-12 rounded-lg cursor-pointer"}),e.jsx("div",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:a.cor},children:"Preview"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:d,className:"btn-secondary",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary",children:n?"Atualizar":"Criar"})]})]})})]})}export{$ as default};
